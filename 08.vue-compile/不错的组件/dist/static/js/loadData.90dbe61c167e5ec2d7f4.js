!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/vue-component/dist/",t(t.s=66)}({1:function(e,t){e.exports=function(e,t,r,i,n){var o,s=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(o=e,s=e.default);var f="function"==typeof s?s.options:s;t&&(f.render=t.render,f.staticRenderFns=t.staticRenderFns),i&&(f._scopeId=i);var u;if(n?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},f._ssrRegister=u):r&&(u=r),u){var l=f.functional,h=l?f.render:f.beforeCreate;l?f.render=function(e,t){return u.call(t),h(e,t)}:f.beforeCreate=h?[].concat(h,u):[u]}return{esModule:o,exports:s,options:f}}},101:function(e,t){},107:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll-wrapper",staticStyle:{border:"1px solid #CCC"},style:e.getScrollWrapperStyle},[r("div",{staticClass:"refreshing",style:e.getRefreshStyle},[r("div",{staticClass:"refreshing-loader",class:e.getRefreshLoadStyle},[e._v("loading")])]),e._v(" "),r("div",{ref:"scroll",staticClass:"scroll",style:e.getScrollStyle},[e._t("content"),e._v(" "),r("div",{staticClass:"loading"},[e.loadCompleted?e._e():r("div",[r("i",{staticClass:"data-loader"},[e._v("loading")]),e._v(" 加载中")]),e._v(" "),e.loadCompleted?r("div",[e._v("加载完成")]):e._e()])],2)])},staticRenderFns:[]}},40:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(41),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function e(){var t=this;(0,n.default)(this,e),this.start=function(e){if(!e)throw new Error("需要执行函数");t.timer&&t.stop(),t.timer=requestAnimationFrame(e)},this.stop=function(){t.timer&&(cancelAnimationFrame(t.timer),t.timer=null)},this.timer=null};t.default=o,e.exports=t.default},41:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},49:function(e,t){},56:function(e,t,r){function i(e){r(101)}var n=r(1)(r(74),r(107),i,null,null);e.exports=n.exports},66:function(e,t,r){"use strict";var i=r(56),n=function(e){return e&&e.__esModule?e:{default:e}}(i);r(49),new Vue({el:"#app",data:function(){return{isRefresh:!0,isLoad:!0,loadDeviation:0,refreshDeviation:75,refreshStage:"WILL",loadStage:"WILL",loadCompleted:!1,height:"100%",values:[1,2,3,4,5,6,7,8,9,10,11,12],count:1}},mounted:function(){},methods:{refreshData:function(){var e=this;this.count+=1,this.values=[this.count,2,3,4,5,6,7,8,9,10,11,12],this.refreshStage="DOING",setTimeout(function(){e.refreshStage="DID",e.values.length>20?e.loadCompleted=!0:e.loadCompleted=!1},1e3)},loadMore:function(){var e=this;if(this.values.length>20)return void(this.loadCompleted=!0);this.loadStage="DOING",setTimeout(function(){e.loadStage="DID",e.values=e.values.concat([31,32,33,34,35,36,37]),e.values.length>20&&(e.loadCompleted=!0)},1e3)}},components:{Load:n.default}})},74:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(40),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=!0;t.default={props:{isRefresh:{type:Boolean,default:!1},isLoad:{type:Boolean,default:!0},refreshDeviation:{type:Number,default:75},refreshIconMaxDis:{type:Number,default:120},loadDeviation:{type:Number,default:0},loadMaxDis:{type:Number,default:50},loadStage:{type:String,default:"WILL"},refreshStage:{type:String,default:"WILL"},loadCompleted:{type:Boolean,default:!1},height:{type:String,default:"100%"}},data:function(){return{copyLoadStage:"WILL",copyRefreshStage:"WILL",finger:{startY:0,endY:0,startTime:0,entTime:0,moveUpY:0,moveDownY:0,cacheMove:0,currentMove:0,allowRefresh:!0}}},computed:{getScrollWrapperStyle:function(){return{height:this.height}},getScrollStyle:function(){var e="";return o||(e="transform 700ms cubic-bezier(0.19, 1, 0.22, 1)"),{transform:"translate3d(0, "+this.finger.moveUpY+"px, 0)",transition:e}},getRefreshLoadStyle:function(){var e=this.copyRefreshStage;return{will:"WILL"===e,doing:"DOING"===e,did:"DID"===e,error:"ERROR"===e}},getRefreshStyle:function(){var e="";return this.finger.moveDownY<=0&&(e="transform 700ms cubic-bezier(0.19, 1, 0.22, 1)"),{transform:"translate3d(0, "+this.finger.moveDownY+"px, 0)",transition:e}},animate:function(){return new n.default}},mounted:function(){var e=this.$el;e.addEventListener("touchstart",this.listenerTouchStart,{passive:!0}),e.addEventListener("touchmove",this.listenerTouchMove,{passive:!0}),e.addEventListener("touchend",this.listenerTouchEnd,{passive:!0})},methods:{isForbidMove:function(){return"DOING"===this.copyLoadStage||"DOING"===this.copyRefreshStage},getScrollToBottomValue:function(){return this.$refs.scroll.offsetHeight-this.$el.clientHeight},moveElement:function(e){if(o){if(this.isRefresh&&e>0)this.finger.allowRefresh?(e=e>this.refreshIconMaxDis?this.refreshIconMaxDis:e,this.finger.moveDownY=e):e=0,this.finger.moveUpY=0;else if(this.isLoad&&e<0){var t=this.getScrollToBottomValue()+this.loadMaxDis;e=Math.abs(e)>t?-t:e,this.finger.moveUpY=e,this.finger.moveDownY=0}this.finger.currentMove=e}},getInertiaDistance:function(){var e=this.finger.endY-this.finger.startY,t=this.finger.endTime-this.finger.startTime,r=e/t;if(0!==r){var i=Math.abs(r),n=Math.floor(i/r),o=.5*n*r*r/.003;Math.abs(o)>400&&(o=400*n);var s=o+this.finger.currentMove;if(s>0)return s=0,this.finger.currentMove=s,void(this.finger.moveUpY=s);var a=this.getScrollToBottomValue();Math.abs(s)+this.loadDeviation>a&&(this.loadCompleted||this.$emit("load-more"),s=Math.abs(s)>a?-a:s),this.finger.moveUpY=s,this.finger.currentMove=s}},listenerTouchStart:function(e){e.stopPropagation(),this.isForbidMove()||(o=!0,this.finger.startY=e.targetTouches[0].pageY,this.finger.cacheMove=this.finger.currentMove,this.finger.allowRefresh=this.finger.cacheMove>=0,this.finger.startTime=Date.now())},listenerTouchMove:function(e){if(e.stopPropagation(),!this.isForbidMove()){var t=e.targetTouches[0].pageY-this.finger.startY+this.finger.cacheMove;this.animate.start(this.moveElement.bind(this,t))}},listenerTouchEnd:function(e){if(e.stopPropagation(),!this.isForbidMove()){if(o=!1,this.finger.currentMove>0)return void(this.finger.moveDownY>this.refreshDeviation?this.$emit("refresh"):this.resetRefresh());this.finger.currentMove<0&&(this.finger.endY=e.changedTouches[0].pageY,this.finger.endTime=Date.now(),this.animate.start(this.getInertiaDistance))}},resetRefresh:function(){this.finger.moveDownY=0,this.finger.currentMove=0,this.copyRefreshStage="WILL"}},watch:{loadStage:function(e){this.copyLoadStage=e},refreshStage:function(e){var t=this;this.copyRefreshStage=e,"DID"!==e&&"ERROR"!==e||setTimeout(function(){t.resetRefresh()},200)}},beforeDestory:function(){var e=this.$el;e.removeEventListener("touchstart",this.listenerTouchStart,{passive:!0}),e.removeEventListener("touchmove",this.listenerTouchMove,{passive:!0}),e.removeEventListener("touchend",this.listenerTouchEnd,{passive:!0})}},e.exports=t.default}});
//# sourceMappingURL=loadData.90dbe61c167e5ec2d7f4.js.map