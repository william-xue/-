/*!
 * Strve.js v5.1.1
 * (c) 2021-2023 maomincoding
 * Released under the MIT License.
 */
const e=s("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),t=s("svg,animate,circle,clippath,cursor,image,defs,desc,ellipse,filter,font-faceforeignobject,g,glyph,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feFlood,feGaussianBlur,feImage,feMerge,feMorphology,feOffset,feSpecularLighting,feTile,feTurbulence,feDistantLight,fePointLight,feSpotLight,linearGradient,stop,radialGradient,animateTransform,animateMotion");function n(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)}function o(e){return-1!==["object","array","function","regexp","date","math"].indexOf(r(e))}function r(e){return Object.prototype.toString.call(e).match(/\[object (.+?)\]/)[1].toLowerCase()}function s(e){const t=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)t[n[e]]=!0;return function(e){return t[e]}}function l(e){if(e.hasOwnProperty("tag")&&e.hasOwnProperty("props")&&e.hasOwnProperty("children"))return!0}function i(e){if("array"===r(e)){for(let t=0;t<e.length;t++)if(l(e[t]))return!0}else if("object"===r(e))return l(e)}s("function,regexp,date,math,undefined,null,boolean,string,number,symbol,bigInt");const a=e=>("object"==typeof e||"function"==typeof e)&&null!==e;function c(e,t){if(!a(e)||!a(t))return e===t;if(e===t)return!0;const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(const n in e){if(!c(e[n],t[n]))return!1}return!0}const u={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},p="http://www.w3.org/1999/xlink";function f(e,t){for(let n in t)e.style[n]=t[n]}function d(e,t,o){var r;if(n(t)?e.removeAttributeNS(p,n(r=t)?r.slice(6,r.length):""):e.removeAttribute(t),t.startsWith("on")){const n=t.split("on")[1][0].toLowerCase()+t.split("on")[1].substring(1);e.removeEventListener(n,o[t])}else if(t.startsWith("@")){const n=t.split("@")[1];e.removeEventListener(n,o[t])}}function h(n){return e(n)?document.createElement(n):t(n)?(o=function(e){return t(e)?"svg":"math"===e?"math":void 0}(n),r=n,document.createElementNS(u[o],r)):"fragment"===n||"component"===n?document.createDocumentFragment():"comment"===n||"null"===n?document.createComment(n):(n.indexOf("-"),document.createElement(n));var o,r}function m(e){return e.tag?e:function(e){return{tag:"fragment",props:null,children:e}}(e)}const g=Object.create(null),b=new WeakMap,y=["$key","$name","$props"];let w="";const C=Object.create(null);let v=function e(t={}){if("object"!=typeof t||null===t)return t;const n={get(t,n,o){if(Reflect.ownKeys(t).includes(n)){const r=Reflect.get(t,n,o);return e(r)}},set(e,t,n,o){if(n===e[t])return!0;if(Reflect.ownKeys(e).includes(t)||Object.keys(g).includes(t)){return Reflect.set(e,t,n,o)}},deleteProperty:(e,t)=>Reflect.deleteProperty(e,t)};return new Proxy(t,n)}(Object.create(null));function O(e,t,o){if(e.tag){const s=h(e.tag);if(e.props){!function(e,t){for(let n=0;n<Object.keys(t).length;n++){const o=Object.keys(t)[n].toString();if(o.startsWith("on")){const n=o.split("on")[1][0].toLowerCase()+o.split("on")[1].substring(1);e.addEventListener(n,t[o])}else if(o.startsWith("@")){const n=o.split("@")[1];e.addEventListener(n,t[o])}}}(s,e.props),e.props.hasOwnProperty(y[0])&&(e.el=s,"string"===r(e.props[y[0]])&&(C[e.props[y[0]]]=s)),e.props.hasOwnProperty(y[1])&&(g[e.props[y[1]]]=Object.create(null),b.set(g[e.props[y[1]]],e.children[0])),e.props.hasOwnProperty(y[1])&&e.props.hasOwnProperty(y[2])&&(v[e.props[y[1]]]=e.props[y[2]]);for(const t in e.props)e.props.hasOwnProperty(t)&&("function"!==r(e.props[t])&&(n(t)?s.setAttributeNS(p,t,e.props[t]):y.includes(t)||s.setAttribute(t,e.props[t])),"object"===r(e.props[t])&&f(s,e.props[t]))}if(e.children){E(e.children,s,(function(){"array"===r(e.children[0])?e.children[0].forEach((e=>{l(e)&&O(e,s)})):"array"===r(e.children)&&e.children.forEach((e=>{l(e)&&O(e,s)}))}))}o?t.insertBefore(s,o):t.appendChild(s)}}function j(e,t,o){const s=e.props||{};if(s.hasOwnProperty(y[0])&&e.tag!==t.tag){const n=e.el.parentNode,o=e.el.nextSibling;n.removeChild(e.el),O(t,n,o)}else{let l=null;if(s.hasOwnProperty(y[0])){const o=t.props||{};l=t.el=e.el;for(const e in o){let[t,i]=[o[e],s[e]];if(t!==i)if(null!==t)if("function"===r(t)||y.includes(e)){if(e.startsWith("on")){const n=e.split("on")[1][0].toLowerCase()+e.split("on")[1].substring(1);l.addEventListener(n,t,!1)}}else l[e]&&(l[e]=t),n(e)?l.setAttributeNS(p,e,t):l.setAttribute(e,t),"object"===r(t)&&f(l,t);else d(l,e,s)}for(const e in s)e in o||d(l,e,s)}const i=e.children[0],a=t.children[0],u=e.children,h=t.children;if(!c(u,h)){E(h,l,(function(){"array"!==r(i)&&"array"===r(a)?(l.innerHTML="",a.forEach((e=>O(e,l)))):"array"===r(i)&&"array"===r(a)?k(i,a,l,o):k(u,h,l,o)}))}}}function k(e,t,n,o){if("useFirstKey"===o)for(let r=1;r<=Math.max(e.length,t.length);r++)e[e.length-r]?t[t.length-r]?j(e[e.length-r],t[t.length-r],o):n.removeChild(e[e.length-r].el):O(t[t.length-r],e[e.length-1].el.parentNode,e[0].el);else{for(let n=0;n<Math.min(e.length,t.length);n++)j(e[n],t[n],o);t.length>e.length?t.slice(e.length).forEach((e=>O(e,n))):e.length>t.length&&e.slice(t.length).forEach((e=>{n.removeChild(e.el)}))}}function E(e,t,n){1!==e.length||o(e[0])?e.length>1&&!i(e)?t&&M(e.join().replace(/,/g,""),t):!o(e[0])||e[0].tag||i(e[0])?n():t&&M(e[0],t):t&&M(e,t)}function M(e,t){o(e)?"function"===r(e)||"regexp"===r(e)||"array"===r(e)?t.textContent=String(e):t.textContent=JSON.stringify(e,null,2):t.textContent=e?e.toString():String(e)}let x=null;function S(e){x=e}let T=null;function L(e){T=e}let P=null;function A(e){P=e}function _(e,t,n,o){if($.isMounted){const t=m(e);j($.oldTree,t,n),$.oldTree=t,o&&b.set(g[o],e)}else{const n=m(e);O(n,t),$.oldTree=n,$.isMounted=!0,x&&x()}}function R(e,t){if("function"===r(e)&&"undefined"!==r(Promise))return Promise.resolve().then((()=>{e()})).then((()=>{if(t&&"useRouter"===t.status)T&&T(),$._el.innerHTML="",T=null,O($.oldTree=$._template(),$._el),x&&x();else if(t&&"useCustomElement"===t.name){const e=b.get(g[t.customElement.id]).template,n=b.get(g[t.customElement.id]).props;j(e,m(t.customElement.template(n)),t.status)}else if(t&&"function"==typeof t.name){const e=t.name.name,n=t.name();w!==e&&(w=e,$.oldTree=m(b.get(g[e]))),_(n,null,t.status,e)}else{const e=t&&t.status?t.status:null;_($._template(),null,e)}P&&P()})).catch((e=>console.error(e)))}function N(e,t){class n extends HTMLElement{shadow;props;isComMounted;comOldTree;static get observedAttributes(){if(e.attributeChanged&&e.attributeChanged.length>0)return e.attributeChanged}constructor(){if(super(),this.shadow=null,this.props=Object.create(null),this.isComMounted=!1,this.comOldTree=Object.create(null),e.template&&e.id){const t=document.createElement("template");t.setAttribute("id",e.id);const n=t.content.cloneNode(!0);if(e.styles&&Array.isArray(e.styles)){const t=document.createElement("style");t.textContent=e.styles.join(""),n.appendChild(t)}if(this.shadow=this.attachShadow({mode:"open"}),this.shadow.appendChild(n),!e.attributeChanged){const t=m(e.template());O(t,this.shadow),g[e.id]=Object.create(null),b.set(g[e.id],{template:t,props:null})}}}connectedCallback(){const t=arguments;e.lifetimes&&"function"==typeof e.lifetimes.connectedCallback&&e.lifetimes.connectedCallback(t)}disconnectedCallback(){const t=arguments;e.lifetimes&&"function"==typeof e.lifetimes.disconnectedCallback&&e.lifetimes.disconnectedCallback(t)}adoptedCallback(){const t=arguments;e.lifetimes&&"function"==typeof e.lifetimes.adoptedCallback&&e.lifetimes.adoptedCallback(t)}attributeChangedCallback(){const t=arguments;if(e.attributeChanged&&e.attributeChanged.length>0){this.props[t[0]]=t[2];const n=m(e.template(this.props));this.isComMounted?(j(this.comOldTree,n),b.set(g[e.id],{template:n,props:this.props}),this.comOldTree=n):(O(n,this.shadow),g[e.id]=Object.create(null),b.set(g[e.id],{template:n,props:this.props}),this.comOldTree=n,this.isComMounted=!0)}e.immediateProps&&e.lifetimes&&"function"==typeof e.lifetimes.attributeChangedCallback&&e.lifetimes.attributeChangedCallback(t)}}"string"==typeof t&&-1!==t.indexOf("-")?customElements.define(t,n):console.warn(`[Strve warn]: [${t}]>> please name the string with "-" as a custom element. `)}const W="5.1.1",$={_el:null,_template:null,oldTree:null,isMounted:!1,observer:null};function D(e){if("string"==typeof e){const t=document.querySelector(e);if(!t){let t=null;return e.startsWith("#")?(t=document.createElement("div"),t.setAttribute("id",e.substring(1,e.length))):e.startsWith(".")?(t=document.createElement("div"),t.setAttribute("class",e.substring(1,e.length))):console.warn(`[Strve warn]: Failed to mount app: mount target selector "${e}" returned null.`),document.body.insertAdjacentElement("afterbegin",t),t}return t}return e instanceof HTMLElement?e:window.ShadowRoot&&e instanceof window.ShadowRoot&&"closed"===e.mode?(console.warn('[Strve warn]: mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs.'),null):null}function F(e){return{mount(t){if(D(t)){const n=e();$._template=e,$._el=D(t),$._el&&_(n,$._el)}else console.warn("[Strve warn]: There must be a mount element node.")}}}const H=(e,t,n,o)=>{let r;t[0]=0;for(let s=1;s<t.length;s++){const l=t[s++],i=t[s]?(t[0]|=l?1:2,n[t[s++]]):t[++s];3===l?o[0]=i:4===l?o[1]=Object.assign(o[1]||{},i):5===l?(o[1]=o[1]||{})[t[++s]]=i:6===l?o[1][t[++s]]+=i+"":l?(r=e.apply(i,H(e,i,n,["",null])),o.push(r),i[0]?t[0]|=2:(t[s-2]=0,t[s]=r)):o.push(i)}return o},q=function(e){let t,n,o=1,r="",s="",l=[0];const i=e=>{1===o&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,e,r):3===o&&(e||r)?(l.push(3,e,r),o=2):2===o&&"..."===r&&e?l.push(4,e,0):2===o&&r&&!e?l.push(5,0,!0,r):o>=5&&((r||!e&&5===o)&&(l.push(o,0,r,n),o=6),e&&(l.push(o,e,0,n),o=6)),r=""};for(let a=0;a<e.length;a++){a&&(1===o&&i(),i(a));for(let c=0;c<e[a].length;c++)t=e[a][c],1===o?"<"===t?(i(),l=[l],o=3):r+=t:4===o?"--"===r&&">"===t?(o=1,r=""):r=t+r[0]:s?t===s?s="":r+=t:'"'===t||"'"===t?s=t:">"===t?(i(),o=1):o&&("="===t?(o=5,n=r,r=""):"/"===t&&(o<5||">"===e[a][c+1])?(i(),3===o&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(i(),o=2):r+=t),3===o&&"!--"===r&&(o=4,l=l[0])}return i(),l},B=new Map,G=function(e){let t=B.get(this);return t||(t=new Map,B.set(this,t)),t=H(this,t.get(e)||(t.set(e,t=q(e)),t),arguments,[]),t.length>1?t:t[0]}.bind((function(e,t,...n){return{tag:e,props:t,children:n}}));export{F as createApp,N as defineCustomElement,C as domInfo,G as h,A as nextTick,S as onMounted,L as onUnmounted,v as propsData,R as setData,W as version};
